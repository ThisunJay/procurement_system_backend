(this.webpackJsonpconstructionindustry=this.webpackJsonpconstructionindustry||[]).push([[0],{100:function(e,t,a){e.exports=a.p+"static/media/img-03.826dea71.png"},101:function(e,t,a){e.exports=a.p+"static/media/build.3fa74376.png"},102:function(e,t,a){e.exports=a.p+"static/media/pen.d7f32182.png"},103:function(e,t,a){e.exports=a.p+"static/media/delivery.2c41e1f7.png"},104:function(e,t,a){e.exports=a.p+"static/media/construction.412adb24.png"},114:function(e,t,a){e.exports=a(247)},119:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},144:function(e,t,a){},237:function(e,t,a){},238:function(e,t,a){e.exports=a.p+"static/media/loading2.cc637824.svg"},241:function(e,t,a){},247:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),s=(a(119),a(4)),m=a(5),o=a(7),i=a(6),d=a(28),u=a(8),p=a(15),h=a(16),E=a(2),b=a.n(E),g=a(11),f=a(17),N=(a(125),a(126),a(100)),v=a.n(N);var _=a(68),x=a(38),w=a(14),y=a.n(w),S=new(function(){function e(){Object(s.a)(this,e),this.host="https://procurement-backend.herokuapp.com",this.port="",this.password="Default@123"}return Object(m.a)(e,[{key:"showAlert",value:function(e,t){return Object(_.confirmAlert)({title:t||"Alert",message:e,buttons:[{label:"Ok"}]}),0}},{key:"setImage",value:function(e){return"".concat(this.host).concat(this.port,"/").concat(e.replace(/\\/g,"/"))}},{key:"numberWithCommas",value:function(e){return e.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",")}},{key:"setToast",value:function(e){Object(x.a)(e,{hideProgressBar:!0,closeOnClick:!0,draggable:!0})}},{key:"setErrorToast",value:function(e){x.a.error(e,{hideProgressBar:!0,closeOnClick:!0,draggable:!0})}},{key:"setDeleteConfirmAlert",value:function(e,t,a,n){Object(_.confirmAlert)({title:e,message:t,buttons:[{label:"Yes",onClick:function(){return a()}},{label:"No",onClick:function(){return n()}}]})}}]),e}()),k=new function e(){var t=this;Object(s.a)(this,e),this.common_sign=function(e,a){var n={email:e,password:a};return new Promise((function(e,a){return y.a.post("".concat(S.host).concat(S.port).concat(t.api.signin),n).then((function(t){e({code:200,data:t.data})})).catch((function(e){a({code:0,error:e})}))}))},this.api={signin:"/api/users/signin"}},O=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).formValueChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.onSubmit=function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),console.log(e.state.username),console.log(e.state.password),k.common_sign(e.state.username,e.state.password).then((function(t){console.log(t.data.data),200==t.code&&(e.props.setCurrentUser(t.data.data),0==t.data.data.role?e.props.history.push("/admin/pending"):1==t.data.data.role?e.props.history.push("/"):e.props.history.push("/admin/dashboard"))})).catch((function(e){}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.clear=function(){e.setState({username:"",password:""})},e.state={username:"",password:""},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.password;return r.a.createElement("div",{className:"container-fluid bg-light"},r.a.createElement("div",{className:"limiter"},r.a.createElement("div",{className:"container-login100"},r.a.createElement("div",{className:"wrap-login100 bg-light"},r.a.createElement("div",{className:"login100-pic js-tilt","data-tilt":!0},r.a.createElement("img",{src:v.a,alt:"IMG"})),r.a.createElement("form",{className:"login100-form validate-form",onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement("span",{className:"login100-form-title font-weight-bold"},"Welcome to Login Portal",r.a.createElement("br",null),r.a.createElement("span",{className:"text-muted small"},"Procurement Coop.")),r.a.createElement("div",{className:"wrap-input100 validate-input","data-validate":"Valid email is required: ex@abc.xyz"},r.a.createElement("input",{className:"input100",type:"text",name:"username",value:a,placeholder:"Enter Username",onChange:function(t){return e.formValueChange(t)},required:!0}),r.a.createElement("span",{className:"focus-input100"}),r.a.createElement("span",{className:"symbol-input100"},r.a.createElement("i",{className:"fa fa-envelope","aria-hidden":"true"}))),r.a.createElement("div",{className:"wrap-input100 validate-input","data-validate":"Password is required"},r.a.createElement("input",{className:"input100",type:"password",name:"password",value:n,placeholder:"Enter Password",onChange:function(t){return e.formValueChange(t)},required:!0}),r.a.createElement("span",{className:"focus-input100"}),r.a.createElement("span",{className:"symbol-input100"},r.a.createElement("i",{className:"fa fa-lock","aria-hidden":"true"}))),r.a.createElement("div",{className:"container-login100-form-btn"},r.a.createElement("button",{className:"login100-form-btn"},"Login")))))))}}]),a}(n.Component),j=[{path:"/",name:"SignIn",component:Object(h.b)(null,{setCurrentUser:function(e){return console.log(e),{type:"SET_CURRENT_USER",user:e}}})(Object(p.f)(O)),exact:!0}],C=(a(144),a(9)),D=a(10),A=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).signoutuser=function(){n.props.auth.user.role;n.props.SignOut&&n.props.SignOut(),n.props.history.push("/")},n.change_toggle=function(){n.state.addSuplierState?n.setState({addSuplierState:!1}):n.setState({addSuplierState:!0})},n.state={side_bar_toggle:!1,addSuplierState:!1},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state.side_bar_toggle,a=this.props.active,n=this.props.auth.user.role,c="";return 1==n?c="Site Manager":2==n?c="Accountant":3==n?c="Management":0==n&&(c="supplier"),console.log("Users role",n),r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-dark bg-dark py-0 shadow-sm  fixed-top"},r.a.createElement("span",{className:"navbar-brand mb-0 h6 text-light ml-2"},"Dashboard",r.a.createElement(C.a,{onClick:function(){return e.setState({side_bar_toggle:!e.state.side_bar_toggle})},icon:D.b,className:"ml-4 click show-icon"})," ")),r.a.createElement("div",{className:"sidebar_wrap sidebar-top ".concat(t?"sidebar_active":"")},r.a.createElement("div",{className:"sidebar-header pb-4 pt-2"},r.a.createElement("div",{className:"d-flex px-4"},r.a.createElement("img",{src:"https://www.iconfinder.com/data/icons/user-pictures/100/male3-512.png",className:"rounded-circle sidebar-image my-auto"}),r.a.createElement("div",{className:"my-auto"},r.a.createElement("h6",{style:{lineHeight:"12px",fontWeight:600},className:"text-white mb-0 mt-1"},c),r.a.createElement("span",{className:"small text-light "},this.props.auth.user.email)))),r.a.createElement("ul",{className:"sidebar"},2==n||3==n?r.a.createElement("li",Object(f.a)({className:"listitem"},"className","listitem ".concat("dashboard"==a&&"active_category")),r.a.createElement(u.b,{to:"/admin/dashboard"},r.a.createElement("h6",{className:"dd categorylink px-2 ".concat("dashboard"==a&&"active_category")},r.a.createElement(C.a,{icon:D.i,className:"mx-3 sidebar-icon"}),"Dashboard"))):"",r.a.createElement(u.b,{to:"/admin/pending"},r.a.createElement("li",{className:"listitem ".concat("Pending"==a&&"active_category")},r.a.createElement("h6",{className:"dd categorylink px-2 ".concat("Pending"==a&&"active_category")},r.a.createElement(C.a,{icon:D.f,className:"mx-3 sidebar-icon"}),"Pending Orders"))),r.a.createElement(u.b,{to:"/admin/completed"},r.a.createElement("li",{className:"listitem ".concat("Completed"==a&&"active_category")},r.a.createElement("h6",{className:"dd categorylink px-2 ".concat("Completed"==a&&"active_category")},r.a.createElement(C.a,{icon:D.c,className:"mx-3 sidebar-icon"}),"Comp. Orders"))),2==n||3==n?r.a.createElement("li",Object(f.a)({className:"listitem"},"className","listitem ".concat("sitemanagers"==a&&"active_category")),r.a.createElement(u.b,{to:"/admin/sitemanagers"},r.a.createElement("h6",{className:"dd categorylink px-2 ".concat("sitemanagers"==a&&"active_category")},r.a.createElement(C.a,{icon:D.l,className:"mx-3 sidebar-icon"}),"User Details"))):"",3==n&&r.a.createElement(u.b,{to:"/admin/createUser"},r.a.createElement("li",{className:"listitem ".concat("CreateUser"==a&&"active_category")},r.a.createElement("h6",{className:"dd categorylink px-2 ".concat("CreateUser"==a&&"active_category")},r.a.createElement(C.a,{icon:D.m,className:"mx-3 sidebar-icon"}),"Create Users"))),2==n||3==n?r.a.createElement(u.b,{to:"/admin/suppliers"},r.a.createElement("li",{className:"listitem ".concat("suppliers"==a&&"active_category")},r.a.createElement("h6",{className:"dd categorylink px-2 ".concat("suppliers"==a&&"active_category")},r.a.createElement(C.a,{icon:D.k,className:"mx-3 sidebar-icon"}),"Suppliers"))):"",2==n||3==n?r.a.createElement(u.b,{to:"/admin/sites"},r.a.createElement("li",{className:"listitem ".concat("sites"==a&&"active_category")},r.a.createElement("h6",{className:"dd categorylink px-2 ".concat("sites"==a&&"active_category")},r.a.createElement(C.a,{icon:D.h,className:"mx-3 sidebar-icon"}),"Site Details"))):"",2==n||3==n?r.a.createElement(u.b,{to:"/admin/items"},r.a.createElement("li",{className:"listitem ".concat("items"==a&&"active_category")},r.a.createElement("h6",{className:"dd categorylink px-2 ".concat("items"==a&&"active_category")},r.a.createElement(C.a,{icon:D.j,className:"mx-3 sidebar-icon"}),"Item Details"))):"",2==n||3==n?r.a.createElement(u.b,{to:"/admin/AddItem"},r.a.createElement("li",{className:"listitem ".concat("Additems"==a&&"active_category")},r.a.createElement("h6",{className:"dd categorylink px-2 ".concat("Additems"==a&&"active_category")},r.a.createElement(C.a,{icon:D.a,className:"mx-3 sidebar-icon"}),"Add Items"))):"",r.a.createElement("li",{onClick:function(){return e.signoutuser()},className:"listitem click"},r.a.createElement("h6",{className:"dd categorylink px-2 ",style:{fontSize:"98%"}},r.a.createElement(C.a,{icon:D.g,className:"mx-3 sidebar-icon"}),"Logout")))))}}]),a}(r.a.Component),M={SignOut:function(){return{type:"USER_LOGOUT"}}},L=Object(h.b)((function(e){return{auth:e.auth||{}}}),M)(Object(p.f)(A)),I=a(72),P=a(13),R=a.n(P),U=a(101),T=a.n(U),V=a(102),q=a.n(V),Y=a(103),W=a.n(Y),G=a(104),F=a.n(G),H=new function e(){var t=this;Object(s.a)(this,e),this.register_site_manager=function(e){var a={data:e};return console.log(a),new Promise((function(e,n){return y.a.post("".concat(S.host).concat(S.port).concat(t.api.register_site_manager),a).then((function(t){200==t.code?e({code:200,data:t.data}):e([])})).catch((function(e){n({code:e.response.status,error:e})}))}))},this.register_suppliers=function(e){return new Promise(function(){var a=Object(g.a)(b.a.mark((function a(n,r){var c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,y.a.post("".concat(S.host).concat(S.port).concat(t.api.register_suppliers),e);case 3:c=a.sent,n({code:200,data:c.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),r({code:0,error:a.t0});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}())},this.get_all_site_managers=function(){return new Promise(function(){var e=Object(g.a)(b.a.mark((function e(a,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("".concat(S.host).concat(S.port).concat(t.api.get_all_site_managers_api));case 3:r=e.sent,a({code:200,data:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n({code:0,error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}())},this.get_all_suppliers=function(){return new Promise(function(){var e=Object(g.a)(b.a.mark((function e(a,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("".concat(S.host).concat(S.port).concat(t.api.get_all_supliers_api));case 3:r=e.sent,a({code:200,data:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n({code:0,error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}())},this.get_all_site_users_details=function(){return new Promise(function(){var e=Object(g.a)(b.a.mark((function e(a,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("".concat(S.host).concat(S.port).concat(t.api.get_all_site_users_api));case 3:r=e.sent,a({code:200,data:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n({code:0,error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}())},this.get_all_orders=function(){return new Promise(function(){var e=Object(g.a)(b.a.mark((function e(a,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("".concat(S.host).concat(S.port).concat(t.api.get_all_orders));case 3:r=e.sent,a({code:200,data:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n({code:0,error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}())},this.get_single_order=function(e){return new Promise(function(){var a=Object(g.a)(b.a.mark((function a(n,r){var c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,y.a.get("".concat(S.host).concat(S.port).concat(t.api.get_single_order).concat(e));case 3:c=a.sent,n({code:200,data:c.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),r({code:0,error:a.t0});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}())},this.get_all_sites=function(){return new Promise(function(){var e=Object(g.a)(b.a.mark((function e(a,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("".concat(S.host).concat(S.port).concat(t.api.all_sites));case 3:r=e.sent,a({code:200,data:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n({code:0,error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}())},this.get_all_stats=function(){return new Promise(function(){var e=Object(g.a)(b.a.mark((function e(a,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("".concat(S.host).concat(S.port).concat(t.api.all_stats));case 3:r=e.sent,a({code:200,data:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n({code:0,error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}())},this.get_recent_details=function(){return new Promise(function(){var e=Object(g.a)(b.a.mark((function e(a,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("".concat(S.host).concat(S.port).concat(t.api.recent," "));case 3:r=e.sent,a({code:200,data:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n({code:0,error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}())},this.get_all_stats_by_months=function(){return new Promise(function(){var e=Object(g.a)(b.a.mark((function e(a,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("".concat(S.host).concat(S.port).concat(t.api.by_month," "));case 3:r=e.sent,a({code:200,data:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n({code:0,error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}())},this.get_order_by_site_id=function(e){return new Promise(function(){var a=Object(g.a)(b.a.mark((function a(n,r){var c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,y.a.get("".concat(S.host).concat(S.port).concat(t.api.get_order_by_site_id,"/").concat(e));case 3:c=a.sent,n({code:200,data:c.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),r({code:0,error:a.t0});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}())},this.get_single_site=function(e){return new Promise(function(){var a=Object(g.a)(b.a.mark((function a(n,r){var c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,y.a.get("".concat(S.host).concat(S.port).concat(t.api.get_single_site,"/").concat(e));case 3:c=a.sent,n({code:200,data:c.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),r({code:0,error:a.t0});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}())},this.add_site=function(e){var a={data:e};return console.log(e),new Promise(function(){var e=Object(g.a)(b.a.mark((function e(n,r){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.post("".concat(S.host).concat(S.port).concat(t.api.add_site),a);case 3:c=e.sent,n({code:200,data:c.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r({code:0,error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}())},this.update_state=function(e){return new Promise(function(){var a=Object(g.a)(b.a.mark((function a(n,r){var c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,y.a.patch("".concat(S.host).concat(S.port).concat(t.api.update_state),e);case 3:c=a.sent,n({code:200,data:c.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),r({code:0,error:a.t0});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}())},this.api={register_site_manager:"/api/users/register",register_suppliers:"/api/suppliers/add",get_all_site_managers_api:"/api/users/sitemanagers",get_all_site_users_api:"/api/users/all",get_all_supliers_api:"/api/suppliers/get",get_all_orders:"/api/orders/get_all",get_single_order:"/api/orders/get_one/",add_site:"/api/sites/create",update_state:"/api/orders/update_state",all_sites:"/api/sites/get_all",all_stats:"/api/stats/all",by_month:"/api/stats/latest",get_order_by_site_id:"/api/orders/getbysite",get_single_site:"/api/sites/getone",recent:"/api/stats/recent"}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){return t.item&&t.item.price&&t.quantity?e+t.item.price*t.quantity:e}),0)},B=function(e){switch(parseInt(e)){case 0:return"Rejected";case 1:return"Order Placed";case 2:return"Accountant Approved";case 3:return"Management Approved";case 4:return"Supplier Approved";case 5:return"Delivered"}},z=function(e){switch(parseInt(e)){case 0:return"xx00";case 1:return"xx01";case 2:return"xx02";case 3:return"xx03";case 4:return"xx04";case 5:return"xx05"}},X=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).componentDidMount=Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H.get_all_stats().then((function(t){e.setState({counts:t.data.data,loading:!1})}));case 2:e.get_data_filteration();case 3:case"end":return t.stop()}}),t)}))),e.get_data_filteration=function(){e.setState({loading:!0}),H.get_all_orders().then((function(t){e.setState({loading:!1,orders:t.data.data})})).catch((function(t){e.setState({loading:!1})})),H.get_recent_details().then((function(t){for(var a=R()(new Date).format("YYYY-MM-DD"),n=new Date(a),r=new Date(R()(a,"YYYY-MM-DD").subtract(7,"days").format("YYYY-MM-DD")),c=t.data.data,l=[],s=function(){var e=new Date(m),t=0,a=c.findIndex((function(t){return t.date===R()(e).format("YYYY-MM-DD")}));a>=0&&(t=c[a].numberoforders),l.push({date:R()(e).format("MMM-DD"),numberoforders:t})},m=r;m<=n;m.setDate(m.getDate()+1))s();e.setState({loading:!1,dates:l.map((function(e){return e.date})),no_of_orders:l.map((function(e){return e.numberoforders}))})})).catch((function(t){e.setState({loading:!1})})),e.setState({main_loading:!1})},e.display=function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},R()(e.date).format("LL"))),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},("0"+e.items.length).slice(-2))),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},"LKR ".concat(S.numberWithCommas(K(e.items)),".00"))),r.a.createElement("td",null,r.a.createElement("span",{className:"mr small rounded py-1 px-2 ".concat(z(e.current_state))},B(e.current_state))),r.a.createElement("td",null,r.a.createElement(u.b,{to:"/admin/orders/".concat(e._id)},r.a.createElement("span",{className:" rounded py-1 px-2 bg-success text-white"},r.a.createElement(C.a,{icon:D.e,className:"mr-1"})," Details"))))},e.getStyle=function(e){return{backgroundColor:e.deleteRequest?"#ffa1a150":"#FFFFFF"}},e.setGreeting=function(){var e=(new Date).getHours();return e>=5&&e<=11?"Good Morning! ":e>=12&&e<=17?"Good Afternoon! ":e>=18&&e<=20?"Good Evening! ":"Good Night! "},e.countbytype=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[0,0,0,0,0,0];return e.forEach((function(e){e.current_state<=5&&e.current_state>=0&&(t[e.current_state]=t[e.current_state]+1)})),console.log(t),t},e.state={counts:null,loading:!0,monthwise:null,orders:[],main_loading:!0,dates:[],no_of_orders:[]},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.counts,n=t.orders,c=t.loading,l=t.main_loading;return r.a.createElement("div",{className:"bg-light wd-wrapper"},r.a.createElement(L,{active:"dashboard"}),r.a.createElement("div",{className:"wrapper-wx"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row mx-1"},r.a.createElement("div",{className:"col-12 px-0"},r.a.createElement("h6",{className:"text-dark bold-normal py-3 bg-white shadow-sm px-3 mt-3 rounded"},"System Overview")),l&&r.a.createElement("div",{className:"col-12 px-0"},r.a.createElement("h6",{className:"text-dark bold-normal py-2 bg-white shadow-sm px-3 mt-2 rounded text-center"},"Loading...")),!l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 pl-0 pr-2"},r.a.createElement("div",{className:J},r.a.createElement("div",{className:"pl-3 pr-0 my-auto"},r.a.createElement("img",{src:"http://fashi.lucidex.tech/images/default/admin.Users.png",className:"sidebar-image"})),r.a.createElement("div",{className:"my-auto"},r.a.createElement("h6",{className:"mb-0 text-secondary bold-normal pr-2"},"Users "),r.a.createElement("h3",{className:"mb-0 text-dark bold-normal pr-2"},("0"+a.user_count).slice(-2))))),r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 pl-0 pr-2"},r.a.createElement("div",{className:J},r.a.createElement("div",{className:"pl-3 pr-0 my-auto"},r.a.createElement("img",{src:"http://fashi.lucidex.tech/images/default/admin.Managers.png",className:"sidebar-image"})),r.a.createElement("div",{className:"my-auto"},r.a.createElement("h6",{className:"mb-0 text-secondary bold-normal pr-2"},"Suppliers "),r.a.createElement("h3",{className:"mb-0 text-dark bold-normal pr-2"},("0"+a.supplier_count).slice(-2))))),r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 pl-0 pr-2"},r.a.createElement("div",{className:J},r.a.createElement("div",{className:"pl-3 pr-0 my-auto"},r.a.createElement("img",{src:q.a,className:"sidebar-image"})),r.a.createElement("div",{className:"my-auto"},r.a.createElement("h6",{className:"mb-0 text-secondary bold-normal pr-2"},"Pending"),r.a.createElement("h3",{className:"mb-0 text-dark bold-normal pr-2"},("0"+a.pending_orders).slice(-2))))),r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 pl-0 pr-2"},r.a.createElement("div",{className:J},r.a.createElement("div",{className:"pl-3 pr-0 my-auto"},r.a.createElement("img",{src:W.a,className:"sidebar-image"})),r.a.createElement("div",{className:"my-auto"},r.a.createElement("h6",{className:"mb-0 text-secondary bold-normal pr-2"},"Completed"),r.a.createElement("h3",{className:"mb-0 text-dark bold-normal pr-2"},("0"+a.completed_orders).slice(-2))))),r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 pl-0 pr-2"},r.a.createElement("div",{className:J},r.a.createElement("div",{className:"pl-3 pr-0 my-auto"},r.a.createElement("img",{src:T.a,className:"sidebar-image"})),r.a.createElement("div",{className:"my-auto"},r.a.createElement("h6",{className:"mb-0 text-secondary bold-normal pr-2"},"Sites"),r.a.createElement("h3",{className:"mb-0 text-dark bold-normal pr-2"},("0"+a.site_count).slice(-2))))),r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 pl-0 pr-0"},r.a.createElement("div",{className:J},r.a.createElement("div",{className:"pl-3 pr-0 my-auto"},r.a.createElement("img",{src:F.a,className:"sidebar-image"})),r.a.createElement("div",{className:"my-auto"},r.a.createElement("h6",{className:"mb-0 text-secondary bold-normal pr-2"}," Items"),r.a.createElement("h3",{className:"mb-0 text-dark bold-normal pr-2"},("0"+a.item_count).slice(-2))))),r.a.createElement("div",{className:"col-8 px-0 mb-2"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-3 bg-white pt-2 pb-0 mr-2 h-100"},r.a.createElement("h6",{className:"text-dark bold-normal px-3 py-1 "},"Orders Count",r.a.createElement("span",{className:"badge badge-primary ml-2"},"Last 7 Days")),r.a.createElement("div",{className:"px-3 pt-2 pb-0"},r.a.createElement(I.Line,{data:{labels:this.state.dates,datasets:[{label:"Revenue",backgroundColor:"#3498db80",borderColor:"#3498dbBF",data:this.state.no_of_orders}]},options:Q,width:8,height:3.5})))),r.a.createElement("div",{className:"col-4 px-0 mb-2"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-3 bg-white pt-2 pb-0 px-2 ml-2 h-100"},r.a.createElement("div",{className:"campaign ct-charts px-3"},r.a.createElement("h6",{className:"text-dark bold-normal py-1 "},"Order Status "),r.a.createElement("div",{className:"p-0"},r.a.createElement(I.Doughnut,{options:{legend:{position:"bottom"}},data:{labels:["Rejected","Placed","A.Approved","M.Approved","S.Approved","Delivered"],datasets:[{label:"Orders",backgroundColor:["#3498db","#3780b6","#3772a1","#356085","#314f6a","#2c3e50"],data:this.countbytype(n)}]},height:"6",width:"7"}))))),r.a.createElement("div",{className:"col-12 px-0 mt-2"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-3 bg-white pt-2 pb-3"},r.a.createElement("h6",{className:"text-dark bold-normal px-3 py-1 "},"  Recent Orders "),r.a.createElement("div",{className:"table-responsive px-2"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Delivery Date")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"No.Items")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Total")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Current State")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Actions")))),r.a.createElement("tbody",null,n&&n.sort((function(e,t){return parseInt(e.current_state)-parseInt(t.current_state)})).map((function(t,a){return e.display(t,a)})).splice(0,5),c&&r.a.createElement("td",{colSpan:5},r.a.createElement("h6",{className:"text-dark normal text-center py-2"},"Loading..."))))))))))))}}]),a}(n.Component),J="card border-0 shadow-sm rounded mt-2 bg-white py-2 d-flex flex-row",Q={scaleShowGridLines:!1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:0,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legend:{display:!1},scales:{xAxes:[{gridLines:{display:!1}}],yAxes:[{gridLines:{display:!1},ticks:{beginAtZero:!0,precision:0}}]}},Z=Object(h.b)((function(e){return{auth:e.auth||{}}}),null)(Object(p.f)(X)),$=(a(237),a(238),function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null)}}]),a}(n.Component)),ee=a(251),te=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).formValueChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.change_toggle=function(){e.state.addManagerState?e.setState({addManagerState:!1}):e.setState({addManagerState:!0})},e.get_all_site_managers=Object(g.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H.get_all_site_users_details();case 2:return a=t.sent,console.log(a.data.data),e.setState({site_managers_arry:a.data.data.filter((function(e){return 0!=e.role}))}),t.next=7,e.setState({loading:!1});case 7:case"end":return t.stop()}}),t)}))),e.display_all_site_managers=function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},e.username)),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},e.email)),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},e.contact_number)),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},e.designation)),r.a.createElement("td",null,r.a.createElement("span",{className:"bg-".concat(1==e.role?"success":"info"," px-2 text-white rounded small")},1==e.role?"Mobile":"Web")," "))},e.state={addManagerState:!1,name:"",contactNumber:"",email:"",site_location:"",site_code:"",password:S.password,site_managers_arry:[],loading:!0,viewUser:"",showUserModal:!1},e.get_all_site_managers(),e}return Object(m.a)(a,[{key:"showViewUser",value:function(e){var t=this.state.site_managers_arry.filter((function(t){return t._id==e}));this.setState({showUserModal:!0,viewUser:t[0]})}},{key:"render",value:function(){var e=this,t=this.state,a=(t.name,t.contactNumber,t.email,t.site_code,t.site_location,t.viewUser);return r.a.createElement("div",{className:"bg-light wd-wrapper"},r.a.createElement(L,{active:"sitemanagers"}),r.a.createElement("div",{className:"wrapper-wx"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement($,{show:this.state.loading}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h6",{className:"text-dark bold-normal py-3 bg-white shadow-sm px-3 mt-3 rounded"},"Users Managment")),r.a.createElement("div",{className:"col-12 iser_i"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("div",{className:"table-responsive px-3"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Name")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Email")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Contact No")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Designation")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Access Level")))),r.a.createElement("tbody",null,this.state.site_managers_arry&&this.state.site_managers_arry.map((function(t){return e.display_all_site_managers(t)})),this.state.loading&&r.a.createElement("td",{colSpan:5},r.a.createElement("h6",{className:"text-dark normal text-center py-2"},"Loading..."))))))),r.a.createElement(ee.a,{size:"md",show:this.state.showUserModal,centered:!0,onHide:function(){return e.setState({showUserModal:!1})}},r.a.createElement(ee.a.Header,{closeButton:!0},r.a.createElement(ee.a.Title,null,"Manager Details")),r.a.createElement(ee.a.Body,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("p",null,r.a.createElement("b",null,"Name : ")," ",a.name)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("p",null,r.a.createElement("b",null,"Contact Number  : ")," ",a.contact_number," ")),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("p",null,r.a.createElement("b",null,"Email : "),"   ",a.email))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("p",null,r.a.createElement("b",null,"Site Location : "),"   ",a.site_location)),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("p",null,r.a.createElement("b",null,"Site Code : "),"   ",a.site_code)))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("center",null,r.a.createElement("a",{className:"btn btn-info btn-sm px-2 mr-2 mt-1",href:"mailto:".concat(a.email)},r.a.createElement(C.a,{icon:D.d})," Send Email"))))))))))}}]),a}(n.Component),ae=a(113),ne=[{value:"Site Manager",label:"Site Manager"},{value:"Accountant",label:"Accountant "},{value:"Management(Admin)",label:"Management(Admin)"}],re=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).formValueChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.handleChange=function(t){e.setState({selectedOption:t}),console.log("Option selected:",t)},e.change_toggle=function(){e.state.addManagerState?e.setState({addManagerState:!1}):e.setState({addManagerState:!0})},e.onSubmit=function(){var t=Object(g.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),n=0,"Site Manager"==e.state.selectedOption.value?n=1:"Accountant"==e.state.selectedOption.value?n=2:"Management(Admin)"==e.state.selectedOption.value&&(n=3),console.log(e.state.selectedOption.value),console.log(n),r={username:e.state.name,contact_number:e.state.contactNumber,email:e.state.email,password:S.password,designation:e.state.selectedOption.value,role:n},console.log(r),H.register_site_manager(r).then((function(t){S.setToast("Successfully Registed"),e.get_all_site_managers(),e.clear(),e.setState({addManagerState:!1}),e.props.history.push("/admin/sitemanagers")})).catch((function(t){console.log(t.code),S.setErrorToast("Someting went wrong"),e.props.history.push("/admin/sitemanagers")}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.clear=function(){e.setState({name:"",contactNumber:"",email:"",site_code:"",site_location:"",password:S.password})},e.get_all_site_managers=Object(g.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H.get_all_site_users_details();case 2:return a=t.sent,console.log(a),e.setState({all_users:a.data.data}),t.next=7,e.setState({loading:!1});case 7:case"end":return t.stop()}}),t)}))),e.state={addManagerState:!1,name:"",contactNumber:"",email:"",site_location:"",site_code:"",password:S.password,all_users:[],loading:!0,viewUser:"",showUserModal:!1,selectedOption:null,designation:""},e.get_all_site_managers(),e}return Object(m.a)(a,[{key:"showViewUser",value:function(e){var t=this.state.all_users.filter((function(t){return t._id==e}));this.setState({showUserModal:!0,viewUser:t[0]})}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.contactNumber,c=t.email,l=t.site_code,s=t.site_location,m=(t.viewUser,t.selectedOption);return r.a.createElement("div",{className:"bg-light wd-wrapper"},r.a.createElement(L,{active:"CreateUser"}),r.a.createElement("div",{className:"wrapper-wx"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h6",{className:"text-dark bold-normal py-3 bg-white shadow-sm px-3 mt-3 rounded"},"Create New Users")),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("form",{className:" py-2  px-3 createUsers",onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("h6",{className:"form-label mb-2 mt-2"},"Username *"),r.a.createElement("input",{id:"user_name",type:"text",name:"name",placeholder:"Enter Username",value:a,className:"form-control",onChange:function(t){return e.formValueChange(t)},required:!0}),r.a.createElement("h6",{className:"form-label mb-2 mt-3"},"Designation *"),r.a.createElement(ae.a,{name:"designation",id:"user_designation",placeholder:"Select Designation",value:m,onChange:this.handleChange,options:ne,required:!0}),r.a.createElement("h6",{className:"form-label mb-2 mt-3"},"Password  *"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Automaticaly Generate and Email",className:"form-control",disabled:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label mb-2 mt-2"},"Email Address *"),r.a.createElement("input",{id:"user_email",type:"email",name:"email",placeholder:"Enter Email Address",value:c,className:"form-control",onChange:function(t){return e.formValueChange(t)},required:!0}),r.a.createElement("h6",{className:"form-label mb-2 mt-3"},"Contact No*"),r.a.createElement("input",{id:"user_contact",type:"text",name:"contactNumber",placeholder:"Enter Phone No",value:n,className:"form-control",onChange:function(t){return e.formValueChange(t)},required:!0}),r.a.createElement("br",null),r.a.createElement("div",{className:"d-flex mt-3"},r.a.createElement("button",{type:"submit",className:"font-weight-bold px-2 btn btn-dark  btn-sm bold-normal "},"Create User"),r.a.createElement("button",{type:"reset",onClick:function(){return e.clear()},className:"font-weight-bold px-2 ml-2  btn btn-secondary  btn-sm bold-normal"},"Cancel"))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{type:"text",name:"site_location",placeholder:"Galle - Main Street",value:s,className:"form-control",onChange:function(t){return e.formValueChange(t)},hidden:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{type:"text",name:"site_code",placeholder:"GL0156",value:l,className:"form-control",onChange:function(t){return e.formValueChange(t)},hidden:!0})),r.a.createElement("div",{className:"col-md-12 mt-4"})))))))))}}]),a}(n.Component),ce=Object(p.f)(re),le=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).formValueChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.get_all_suppliers_func=Object(g.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H.get_all_suppliers();case 2:a=t.sent,console.log(a),e.setState({suppliers_arry:a.data.data,loading:!1});case 5:case"end":return t.stop()}}),t)}))),e.change_toggle=function(){e.state.addSuplierState?e.setState({addSuplierState:!1}):e.setState({addSuplierState:!0})},e.onSubmit=function(){var t=Object(g.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),n={name:e.state.name,phoneNo:e.state.contactNumber,email:e.state.email,password:S.password,address:e.state.address},console.log(n),H.register_suppliers(n).then((function(t){e.get_all_suppliers_func(),S.setToast("Successfully Registed"),e.clear()})).catch((function(e){S.setErrorToast("Someting went wrong")}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.clear=function(){e.setState({name:"",contactNumber:"",email:"",password:S.password,address:""})},e.display_all_supliers=function(t){return console.log(e.state.suppliers_arry),r.a.createElement("tr",{key:t._id},r.a.createElement("td",null," ",r.a.createElement("h6",{className:"text-dark normal"},t.name)),r.a.createElement("td",null," ",r.a.createElement("h6",{className:"text-dark normal"},t.email)),r.a.createElement("td",null," ",r.a.createElement("h6",{className:"text-dark normal"},t.address," ")),r.a.createElement("td",null," ",r.a.createElement("h6",{className:"text-dark normal"},t.phoneNo)))},e.state={loading:!0,addSuplierState:!1,name:"",contactNumber:"",email:"",password:S.password,address:"",suppliers_arry:[]},e.get_all_suppliers_func(),e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.contactNumber,c=t.email,l=this.props.auth.user.role;return r.a.createElement("div",{className:"bg-light wd-wrapper"},r.a.createElement(L,{active:"suppliers"}),r.a.createElement("div",{className:"wrapper-wx"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h6",{className:"text-dark bold-normal py-3 bg-white shadow-sm px-3 mt-3 rounded"},"Supplier Management")),3==l&&r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("form",{className:" py-2  px-3 supliers",onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label mt-2 mb-2"},"Name *"),r.a.createElement("input",{id:"s_name",type:"text",name:"name",placeholder:"Enter Supplier Name",value:a,className:"form-control",onChange:function(t){return e.formValueChange(t)},required:!0}),r.a.createElement("h6",{className:"form-label mt-3 mb-2"},"Email *"),r.a.createElement("input",{id:"s_email",type:"email",name:"email",placeholder:"Enter Supplier Email",value:c,className:"form-control",onChange:function(t){return e.formValueChange(t)},required:!0}),r.a.createElement("h6",{className:"form-label mt-3 mb-2"},"Address *"),r.a.createElement("input",{id:"s_address",type:"text",name:"address",placeholder:"Enter Supplier Address",className:"form-control",onChange:function(t){return e.formValueChange(t)},required:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label mt-2 mb-2"},"Contact Number *"),r.a.createElement("input",{id:"c_number",type:"number",name:"contactNumber",placeholder:"Enter Contact No",value:n,className:"form-control",onChange:function(t){return e.formValueChange(t)},required:!0}),r.a.createElement("h6",{className:"form-label mt-3 mb-2"},"Password  *"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Automaticaly Generate and Email",className:"form-control",disabled:!0}),r.a.createElement("br",null),r.a.createElement("div",{className:"d-flex mt-3"},r.a.createElement("button",{type:"submit",className:"font-weight-bold px-2 btn btn-dark  btn-sm bold-normal"},"Add Supplier"),r.a.createElement("button",{type:"reset",onClick:function(){return e.clear()},className:"font-weight-bold px-2 ml-2  btn btn-secondary  btn-sm bold-normal"},"Cancel"))))))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("div",{className:"table-responsive px-2"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Name")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Email")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Address")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Contact No")))),r.a.createElement("tbody",null,this.state.suppliers_arry&&this.state.suppliers_arry.map((function(t){return e.display_all_supliers(t)})),this.state.loading&&r.a.createElement("td",{colSpan:4},r.a.createElement("h6",{className:"text-dark normal text-center py-2"},"Loading...")))))))))))}}]),a}(n.Component),se=Object(h.b)((function(e){return{auth:e.auth||{}}}),null)(Object(p.f)(le)),me=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).formValueChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.change_toggle=function(){e.state.addSuplierState?e.setState({addSuplierState:!1}):e.setState({addSuplierState:!0})},e.state={email:"",name:""},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"bg-light wd-wrapper"},r.a.createElement(L,{active:"orders"}),r.a.createElement("div",{className:"wrapper-wx"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h5",{className:"text-dark bold-normal py-2 bg-white shadow-sm px-2 mt-3 rounded"},"Orders Management")),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-3 bg-white pb-2"},r.a.createElement("form",{className:" py-2  px-3 ordersearch",onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label py-2"},"Supplier Name"),r.a.createElement("input",{id:"s_name",type:"text",name:"name",className:"form-control"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label py-2"},"Site Manager Name"),r.a.createElement("input",{id:"s_site_manager",type:"text",name:"email",className:"form-control"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label py-2"},"Start Date"),r.a.createElement("input",{type:"date",name:"name",className:"form-control"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label py-2"},"End Date"),r.a.createElement("input",{type:"date",name:"name",className:"form-control"})),r.a.createElement("div",{className:"col-md-4 mt-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("button",{type:"reset",className:" btn btn-secondary   bold-normal",style:{width:"100%"}},"Reset")),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("button",{type:"submit",className:" btn btn-dark   bold-normal",style:{width:"100%"}},"Search")))))))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-3 bg-white pb-2"},r.a.createElement("h5",{className:"text-dark bold-normal py-2 bg-white px-2"},"All Orders"),r.a.createElement("div",{className:"table-responsive px-2"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Date"),r.a.createElement("th",{scope:"col"},"No.Items"),r.a.createElement("th",{scope:"col"},"Site Location"),r.a.createElement("th",{scope:"col"},"Actions"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,R()(new Date("2020-10-06")).format("YYYY MMM DD")),r.a.createElement("td",null,"05"),r.a.createElement("td",null,"Galle - Main Street(GL05)"),r.a.createElement("td",null,r.a.createElement(u.b,{to:"/admin/orders/1"},r.a.createElement("button",{className:"btn btn-success btn-sm px-2 mr-2"},r.a.createElement(C.a,{icon:D.e}))))))))))))))}}]),a}(n.Component),oe=(a(240),function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).display=function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},R()(e.date).format("LL"))),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},("0"+e.items.length).slice(-2))),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},"LKR ".concat(S.numberWithCommas(K(e.items)),".00"))),r.a.createElement("td",null,r.a.createElement("span",{className:"mr small rounded py-1 px-2 ".concat(z(e.current_state))},B(e.current_state))),r.a.createElement("td",null,r.a.createElement(u.b,{to:"/admin/orders/".concat(e._id)},r.a.createElement("span",{className:" rounded py-1 px-2 bg-success text-white"},r.a.createElement(C.a,{icon:D.e,className:"mr-1"})," Details"))))},n.state={id:e.match.params.id,site:{},loading:!0,orders:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;H.get_order_by_site_id(this.props.match.params.id).then((function(t){return e.setState({orders:t.data.data}),H.get_single_site(e.props.match.params.id)})).then((function(t){e.setState({loading:!1,site:t.data.data})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.site,n=(t.id,t.orders),c=t.loading;return r.a.createElement("div",{className:"bg-light wd-wrapper"},r.a.createElement(L,{active:"sites"}),r.a.createElement("div",{className:"wrapper-wx"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h6",{className:"text-dark bold-normal py-3 bg-white shadow-sm px-3 mt-3 rounded"},"Site Details")),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("form",{className:" py-2  px-3 "},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label mb-2 mt-2"},"Address"),r.a.createElement("input",{type:"text",name:"address",value:a.address,readOnly:!0,className:"form-control"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label mb-2 mt-2"},"Site Code"),r.a.createElement("input",{type:"text",name:"sitecode",value:a.site_code,readOnly:!0,className:"form-control"})))))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("div",{className:"table-responsive px-2"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Delivery Date")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"No.Items")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Total")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Current State")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Actions")))),r.a.createElement("tbody",null,!c&&n&&n.map((function(t,a){return e.display(t,a)})),c&&r.a.createElement("td",{colSpan:5},r.a.createElement("h6",{className:"text-dark normal text-center py-2"},"Loading...")))))))))))}}]),a}(n.Component)),ie=(a(241),function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getData=function(){var e=null;H.get_single_order(n.props.match.params.id).then((function(t){return n.setState({item:t.data.data.order,supplier:t.data.data.supplier}),e=t.data.data.order.site,H.get_all_sites()})).then((function(t){var a=t.data.data.find((function(t){return t._id==e}));a&&n.setState({site:a,loading:!1})})).catch((function(e){console.log(e),n.setState({loading:!1,item:null})}))},n.Submit=function(e){n.setState({loading:!0}),H.update_state(e).then((function(e){n.getData(),S.setToast("Order Status Change Successfully")})).catch((function(e){n.setState({loading:!1}),S.setErrorToast("Order Status Change Failed")}))},n.Approve=function(){var e=n.props.auth,t=n.state,a=t.id,r=t.comment,c=e.user.role,l=1,s="";2==c&&(l=2,s="Accountant Approved"),3==c&&(l=3,s="Management Approved"),0==c&&(l=4,s="Supplier Approved"),n.Submit({id:a,state:{state:l,comment:s,date:new Date,note:r}})},n.Reject=function(){var e=n.props.auth.user.role,t=n.state,a=t.id,r=t.comment;r.length>0?n.Submit({id:a,state:{state:0,comment:"Rejected",date:new Date,note:r,by:e}}):S.showAlert("Comment is required if you are rejecting an order !","")},n.render_state=function(e){switch(parseInt(e.state)){case 0:return r.a.createElement("span",{className:"mr-1 small rounded bg-danger py-1 px-2 text-white "},e.comment);case 1:return r.a.createElement("span",{className:"mr-1 small rounded bg-info py-1 px-2 text-white "},e.comment);case 2:return r.a.createElement("span",{className:"mr-1 small rounded state2 py-1 px-2 text-white"},e.comment);case 3:return r.a.createElement("span",{className:"mr-1 small rounded state3 py-1 px-2 text-white"},e.comment);case 4:return r.a.createElement("span",{className:"mr-1 small rounded state4 py-1 px-2 text-white"},e.comment);case 5:return r.a.createElement("span",{className:"mr-1 small rounded bg-success py-1 px-2 text-white"},e.comment)}},n.gettotal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){return t.item&&t.item.price&&t.quantity?e+t.item.price*t.quantity:e}),0)},n.state={id:e.match.params.id,item:null,supplier:null,site:null,comment:"",loading:!0},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.props.auth,a=this.state,n=a.item,c=a.loading,l=a.supplier,s=a.site,m=a.comment;return r.a.createElement("div",{className:"bg-light wd-wrapper"},r.a.createElement(L,{active:"orders"}),r.a.createElement("div",{className:"wrapper-wx"},r.a.createElement("div",{className:"container-fluid pb-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h6",{className:"text-dark bold-normal py-3 bg-white shadow-sm px-3 mt-3 rounded"},"Order Details")),c&&r.a.createElement("div",{className:"col-12"},r.a.createElement("h6",{className:"text-dark font-weight-bold py-2 bg-white shadow-sm px-3 mt-2 rounded small text-center"},"Loading...")),!c&&null!=n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("div",{className:"card-header m-0 p-0 bg-white2"},r.a.createElement("h6",{className:"text-dark bold-normal py-2 px-3 mb-0 form-label"},"Construction Site Details")),r.a.createElement("div",{className:" py-2  px-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label mt-2 mb-2"},"Site Manager Name"),r.a.createElement("input",{style:{backgroundColor:"#fcfcfc"},type:"text",name:"supliername",value:s.site_manager&&s.site_manager.username,className:"form-control-sm form-control",readOnly:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label mt-2 mb-2"},"Site Contact No"),r.a.createElement("input",{style:{backgroundColor:"#fcfcfc"},type:"text",name:"supliername",value:s.site_manager&&s.site_manager.contact_number,className:"form-control-sm form-control",readOnly:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label  mt-2 mb-2"},"Site Location"),r.a.createElement("input",{style:{backgroundColor:"#fcfcfc"},type:"text",name:"supliername",value:s.address,className:"form-control-sm form-control",readOnly:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label mt-2 mb-2"},"Site Code"),r.a.createElement("input",{style:{backgroundColor:"#fcfcfc"},type:"text",name:"supliername",value:s.site_code,className:"form-control-sm form-control",readOnly:!0})))))),r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("div",{className:"card-header m-0 p-0 bg-white2"},r.a.createElement("h6",{className:"text-dark bold-normal py-2 px-3 mb-0 form-label"},"Supplier Details")),r.a.createElement("div",{className:" py-2  px-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label mt-2 mb-2"},"Supplier Name"),r.a.createElement("input",{style:{backgroundColor:"#fcfcfc"},type:"text",name:"supliername",value:l.name,className:"form-control-sm form-control",readOnly:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label mt-2 mb-2"},"Supplier Contact No"),r.a.createElement("input",{style:{backgroundColor:"#fcfcfc"},type:"text",name:"supliername",value:l.phoneNo,className:"form-control-sm form-control",readOnly:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label  mt-2 mb-2"},"Email Address"),r.a.createElement("input",{style:{backgroundColor:"#fcfcfc"},type:"text",name:"supliername",value:l.email,className:"form-control-sm form-control",readOnly:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label mt-2 mb-2"},"Address"),r.a.createElement("input",{style:{backgroundColor:"#fcfcfc"},type:"text",name:"supliername",value:l.address,className:"form-control-sm form-control",readOnly:!0})))))),r.a.createElement("div",{className:"col-9 pb-3"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-3 bg-white pb-2 h-100"},r.a.createElement("div",{className:"card-header m-0 p-0 bg-white2"},r.a.createElement("h6",{className:"text-dark bold-normal py-2 px-3 mb-0 form-label"},"Order Item Details")),r.a.createElement("div",{className:"table-responsive px-2"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"normal mb-0 "},"Item Name")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"normal mb-0 "},"Quantity")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"normal mb-0 "},"Price")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"normal mb-0 "},"Sub Total")))),r.a.createElement("tbody",null,n.items.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},e.item.name)),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},e.quantity)),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},"LKR ".concat(e.item.price,".00"))),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},"LKR ".concat(S.numberWithCommas(parseInt(e.item.price)*parseInt(e.quantity)),".00"))))})),r.a.createElement("tr",null,r.a.createElement("td",{className:"bg-light",colSpan:2}),r.a.createElement("td",{className:"bg-light"},r.a.createElement("h6",{className:"normal "},"Total")),r.a.createElement("td",{className:"bg-light"},r.a.createElement("h6",{className:"normal text-left"},"LKR ".concat(S.numberWithCommas(this.gettotal(n.items)),".00"))))))))),r.a.createElement("div",{className:"col-3 pb-3"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-3 bg-white pb-2 h-100"},r.a.createElement("div",{className:"card-header m-0 p-0 bg-white2"},r.a.createElement("h6",{className:"text-dark bold-normal py-2 px-3 mb-0 form-label"},"Order Status Log")),r.a.createElement("div",{className:"table-responsive px-2"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("tbody",null,n.state.map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",null,e.render_state(t),t.note&&t.note.length>0&&r.a.createElement("h6",{className:"text-muted bold-normal small text-left  py-2 mb-0 mt-1"},t.note&&t.note.length>0&&t.note),r.a.createElement("h6",{className:"text-dark small text-left mb-0 mt-1"},R()(t.date).calendar())))}))))))),r.a.createElement("div",{className:"col-12 mb-2"},2==t.user.role&&1==n.current_state&&r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-3 bg-white pb-2"},r.a.createElement("div",{className:"col-12 pb-2 mt-2"},r.a.createElement("h6",{className:"text-dark bold-normal py-2 px-2 mb-0 normal "},"Accountant approval need to procceed. Adding a comment is optional"),r.a.createElement("textarea",{rows:2,value:m,onChange:function(t){return e.setState({comment:t.target.value})},placeholder:"Add a note to check others",className:"form-control mx-2 w-75 mt-1"}),r.a.createElement("div",{className:"mx-2 mt-2"},r.a.createElement("button",{onClick:this.Approve,className:"btn btn-sm btn-success mr-2"},"Approve"),r.a.createElement("button",{onClick:this.Reject,className:"btn btn-sm btn-danger"},"Reject")))),3==t.user.role&&2==n.current_state&&r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-3 bg-white pb-2"},r.a.createElement("div",{className:"col-12 pb-2 mt-2"},r.a.createElement("h6",{className:"text-dark bold-normal py-2 px-2 mb-0 normal "},"Management approval need to procceed. Adding a comment is optional"),r.a.createElement("textarea",{rows:2,value:m,onChange:function(t){return e.setState({comment:t.target.value})},placeholder:"Add a note to check others",className:"form-control mx-2 w-75 mt-1"}),r.a.createElement("div",{className:"mx-2 mt-2"},r.a.createElement("button",{onClick:this.Approve,className:"btn btn-sm btn-success mr-2"},"Approve"),r.a.createElement("button",{onClick:this.Reject,className:"btn btn-sm btn-danger"},"Reject")))),0==t.user.role&&3==n.current_state&&r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-3 bg-white pb-2"},r.a.createElement("div",{className:"col-12 pb-2 mt-2"},r.a.createElement("h6",{className:"text-dark bold-normal py-2 px-2 mb-0 normal "},"Supplier approval need to procceed. Adding a comment is optional"),r.a.createElement("textarea",{rows:2,value:m,onChange:function(t){return e.setState({comment:t.target.value})},placeholder:"Add a note to check others",className:"form-control mx-2 w-75 mt-1"}),r.a.createElement("div",{className:"mx-2 mt-2"},r.a.createElement("button",{onClick:this.Approve,className:"btn btn-sm btn-success mr-2"},"Approve"),r.a.createElement("button",{onClick:this.Reject,className:"btn btn-sm btn-danger"},"Reject")))))),!c&&null==n&&r.a.createElement("div",{className:"col-12"},r.a.createElement("h6",{className:"text-dark font-weight-bold py-3 bg-white shadow-sm px-3 mt-2 rounded small text-center"},"No Item Found !"))))))}}]),a}(n.Component)),de=Object(h.b)((function(e){return{auth:e.auth||{}}}))(ie),ue=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).formValueChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.change_toggle=function(){e.state.addManagerState?e.setState({addManagerState:!1}):e.setState({addManagerState:!0})},e.onSubmit=function(){var t=Object(g.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!(""==e.state.site_manager|null==e.state.site_manager)){t.next=3;break}return t.abrupt("return",S.setErrorToast("Someting went wrong"));case 3:n={address:e.state.address,site_code:e.state.site_code,site_manager:e.state.site_manager},H.add_site(n).then((function(t){e.clear(),e.get_all_sites(),e.get_all_site_managers(),e.renderOptions(),S.setToast("Successfully Added")})).catch((function(e){S.setErrorToast("Someting went wrong")}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.clear=function(){e.setState({address:"",site_code:""})},e.get_all_site_managers=Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:H.get_all_site_managers().then((function(t){e.setState({site_managers_arry:t.data.data})})).then((function(t){e.renderOptions()})).then((function(t){e.setState({loading:!1})}));case 1:case"end":return t.stop()}}),t)}))),e.get_all_sites=function(){H.get_all_sites().then((function(t){e.setState({all_sites:t.data.data})})).catch((function(e){}))},e.display_all_site_managers=function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},("0"+(t+1)).slice(-2))),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},e.site_code)),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},e.address)),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},e.site_manager.username)),r.a.createElement("td",null,r.a.createElement(u.b,{to:"/admin/sites/".concat(e._id)},r.a.createElement("span",{className:" rounded py-1 px-2 bg-success text-white"},r.a.createElement(C.a,{icon:D.e,className:"mr-1"})," Details"))))},e.state={addManagerState:!1,address:"",site_code:"",site_manager:"",loading:!0,site_managers_arry:[]},e.get_all_site_managers(),e.get_all_sites(),e}return Object(m.a)(a,[{key:"renderOptions",value:function(){return this.state.site_managers_arry.filter((function(e){return""==e.site_code})).map((function(e,t){return r.a.createElement("option",{className:"form-control",value:e._id}," ",e.username)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.address,n=t.site_code,c=t.site_manager,l=this.props.auth.user.role;return r.a.createElement("div",{className:"bg-light wd-wrapper"},r.a.createElement(L,{active:"sites"}),r.a.createElement("div",{className:"wrapper-wx"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement($,{show:this.state.loading}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h6",{className:"text-dark bold-normal py-3 bg-white shadow-sm px-3 mt-3 rounded"},"Site Management")),3==l&&r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("form",{className:" py-2  px-3 ",onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label mb-2 mt-2"},"Address *"),r.a.createElement("input",{type:"text",name:"address",placeholder:"Enter Site Address",value:a,className:"form-control",onChange:function(t){return e.formValueChange(t)},required:!0}),r.a.createElement("h6",{className:"form-label mb-2 mt-3"},"Site Code *"),r.a.createElement("input",{type:"text",name:"site_code",placeholder:"Enter Side Code",value:n,className:"form-control",onChange:function(t){return e.formValueChange(t)},required:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label mb-2 mt-2"},"Site Manager *"),r.a.createElement("select",{name:"site_manager",value:c,className:"form-control",onChange:function(t){return e.formValueChange(t)},required:!0},r.a.createElement("option",{className:"form-control",value:""}," Select Site Manager"),this.renderOptions()),r.a.createElement("br",null),r.a.createElement("div",{className:"d-flex mt-3"},r.a.createElement("button",{type:"submit",className:"font-weight-bold px-2 btn btn-dark  btn-sm bold-normal"},"Add Site"),r.a.createElement("button",{type:"reset",onClick:function(){return e.clear()},className:"font-weight-bold px-2 ml-2  btn btn-secondary  btn-sm bold-normal"},"Cancel"))))))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("div",{className:"table-responsive px-2"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"ID")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Site Code")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Site Addreess")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Site Manager")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Actions")))),r.a.createElement("tbody",null,this.state.all_sites&&this.state.all_sites.map((function(t,a){return e.display_all_site_managers(t,a)})),this.state.loading&&r.a.createElement("td",{colSpan:4},r.a.createElement("h6",{className:"text-dark normal text-center py-2"},"Loading...")))))))))))}}]),a}(n.Component),pe=Object(h.b)((function(e){return{auth:e.auth||{}}}),null)(Object(p.f)(ue)),he=a(74),Ee=function(e){return new Promise((function(t,a){return y.a.post("".concat(S.host).concat(S.port,"/api/items/create"),e).then((function(e){200==e.status?t(Object(he.a)(Object(he.a)({},e.data),{},{status:200})):t({status:e.status})})).catch((function(e){a(e)}))}))},be=function(){return new Promise((function(e,t){return y.a.get("".concat(S.host).concat(S.port,"/api/items/get_all")).then((function(t){200==t.status?e(t):e([])})).catch((function(e){t(e)}))}))},ge=function(e){return console.log("id eka mekada balanna",e),new Promise((function(t,a){return y.a.delete("".concat(S.host).concat(S.port,"/api/items/delete/").concat(e)).then((function(e){t({code:200,message:e.data.message})})).catch((function(e){a({code:0,error:e})}))}))},fe=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).load_items_data=function(){be().then((function(t){e.setState({isLoaded:!0,itemsList:t.data.data}),console.log("Items data",t.data.data)})).catch((function(e){console.log(e)}))},e.renderAllItems=function(t){return r.a.createElement("tr",{key:t._id},r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},t.item_id)),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},t.item_name)),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},t.description)),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},"LKR ".concat(t.price,".00"))),r.a.createElement("td",null,r.a.createElement("span",{onClick:function(){return e.onPressDeleteItem(t)},className:"badge badge-danger  click font-weight-bold ml-2"},"Remove")))},e.onPressDeleteItem=function(t){S.setDeleteConfirmAlert("Delete Item","Are you sure you want to delete this item?",(function(){return e.deleteItem(t)}),(function(){return console.log("canceled")}))},e.deleteItem=function(t){var a=t._id;ge(a).then((function(t){e.load_items_data(),200==t.status?S.setToast("Item Deleted Successfully"):S.setToast(t.message)})).catch((function(e){console.log(e),S.setErrorToast("Something Wrong Happend!")}))},e.state={isLoaded:!1,supplierList:[],itemsList:[],supplier:{},item_id:"",description:"",item_name:"",price:""},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.load_items_data()}},{key:"render",value:function(){var e=this,t=this.state.itemsList;return r.a.createElement("div",{className:"bg-light wd-wrapper"},r.a.createElement(L,{active:"items"}),r.a.createElement("div",{className:"wrapper-wx"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h6",{className:"text-dark bold-normal py-3 bg-white shadow-sm px-3 mt-3 rounded"},"Items Management")),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("div",{className:"table-responsive px-2"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Item ID")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Item Name")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Description")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Price")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Actions")))),r.a.createElement("tbody",null,t.map((function(t){return e.renderAllItems(t)})),!this.state.isLoaded&&r.a.createElement("td",{colSpan:6},r.a.createElement("h6",{className:"text-dark normal text-center py-2"},"Loading...")))))))))))}}]),a}(n.Component),Ne=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).load_data=Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:new Promise((function(e,t){return y.a.get("".concat(S.host).concat(S.port,"/api/suppliers/get")).then((function(t){200==t.status?e(t):e({status:t.status})})).catch((function(e){t(e)}))})).then((function(t){e.setState({supplierList:t.data.data}),console.log("Supplier data",t.data.data)})).catch((function(e){console.log(e)}));case 1:case"end":return t.stop()}}),t)}))),e.load_items_data=Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:be().then((function(t){e.setState({isLoaded:!0,itemsList:t.data.data}),console.log("Items data",t)})).catch((function(e){console.log(e)}));case 1:case"end":return t.stop()}}),t)}))),e.handleSelect=function(t){e.setState({sup:t.target.value})},e.formValueChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.onSubmit=function(){var t=Object(g.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),n={item_id:e.state.item_id,item_name:e.state.item_name,description:e.state.description,price:e.state.price,supplierName:e.state.sup},Ee(n).then((function(t){200==t.status?(S.setToast("Added Successfully!"),e.load_items_data(),e.clear(),e.props.history.push("/admin/items")):S.setErrorToast("Something Wrong Happend!")})).catch((function(e){console.log(e),S.setErrorToast("Something Wrong Happend!")}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.clear=function(){e.setState({item_name:"",item_id:"",description:"",price:"",password:S.password})},e.renderAllItems=function(t){return r.a.createElement("tr",{key:t._id},r.a.createElement("td",null,t.item_id),r.a.createElement("td",null,t.item_name),r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.price,".00"),r.a.createElement("td",null,r.a.createElement("span",{onClick:function(){return e.deleteItem(t)},className:"badge badge-info rounded-0 bg-white text-danger border border-secondary click font-weight-bold ml-2"},"Delete")))},e.renderSessions=function(){return Object(d.a)(e.state.lectList.map((function(e){return{label:"".concat(e.name),value:e.name}})))},e.deleteItem=function(t){var a=t._id;ge(a).then((function(t){200==t.status?(S.setToast("Item Deleted Successfully"),e.load_items_data()):S.setToast(t.message)})).catch((function(e){console.log(e),S.setErrorToast("Something Wrong Happend!")}))},e.deleted=function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ge(a).then((function(t){200==t.status?(S.setToast("Item Deleted Successfully"),e.load_items_data()):S.setToast(t.message)})).catch((function(e){console.log(e),S.setErrorToast("Something Wrong Happend!")}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={sup:"",isLoaded:!1,supplierList:[],itemsList:[],supplier:{},item_id:"",description:"",item_name:"",price:"",supplierName:{}},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.load_data(),this.load_items_data();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.item_id,n=t.description,c=t.item_name,l=t.price,s=(t.supplier,t.supplierList);t.itemsList;return r.a.createElement("div",{className:"bg-light wd-wrapper"},r.a.createElement(L,{active:"Additems"}),r.a.createElement("div",{className:"wrapper-wx"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h6",{className:"text-dark bold-normal py-3 bg-white shadow-sm px-3 mt-3 rounded"},"Create New Items")),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("form",{className:" py-2  px-3 additems",onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label mb-2 mt-2"},"Item ID *"),r.a.createElement("input",{id:"itemId",type:"text",name:"item_id",placeholder:"Enter Item ID",value:a,className:"form-control",onChange:function(t){return e.formValueChange(t)},required:!0}),r.a.createElement("h6",{className:"form-label mb-2 mt-3"},"Description *"),r.a.createElement("input",{id:"item_description",type:"text",name:"description",placeholder:"Enter Small Description",value:n,className:"form-control",onChange:function(t){return e.formValueChange(t)},required:!0}),r.a.createElement("h6",{className:"form-label mb-2 mt-3"},"Supplier *"),r.a.createElement("select",{value:this.state.sup,onChange:this.handleSelect,className:"form-control",required:!0},r.a.createElement("option",{value:""},"Select a Supplier"),s.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)})))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label mb-2 mt-2"},"Item Name *"),r.a.createElement("input",{id:"item_name",type:"text",name:"item_name",placeholder:"Enter Item Name",value:c,className:"form-control",onChange:function(t){return e.formValueChange(t)},required:!0}),r.a.createElement("h6",{className:"form-label mb-2 mt-3"},"Price *"),r.a.createElement("input",{id:"item_price",type:"text",name:"price",placeholder:"Enter Item Price",value:l,className:"form-control",onChange:function(t){return e.formValueChange(t)},required:!0})),r.a.createElement("div",{className:"col-md-12 mt-4"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("button",{type:"submit",className:"font-weight-bold px-2 btn btn-dark  btn-sm bold-normal"},"Add New Item"),r.a.createElement("button",{type:"reset",onClick:function(){return e.clear()},className:"font-weight-bold px-2 ml-2  btn btn-secondary  btn-sm bold-normal"},"Cancel")))))))))))}}]),a}(n.Component),ve=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).display=function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},R()(e.date).format("LL"))),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},("0"+e.items.length).slice(-2))),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},"LKR ".concat(S.numberWithCommas(K(e.items)),".00"))),r.a.createElement("td",null,r.a.createElement("span",{className:" small rounded py-1 px-2 ".concat(z(e.current_state))},B(e.current_state))),r.a.createElement("td",null,r.a.createElement(u.b,{to:"/admin/orders/".concat(e._id)},r.a.createElement("span",{className:" rounded py-1 px-2 bg-success text-white"},r.a.createElement(C.a,{icon:D.e,className:"mr-1"})," Details"))))},e.state={orders:[],loading:!0},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;H.get_all_orders().then((function(t){e.setState({loading:!1,orders:t.data.data.filter((function(e){return 0==e.current_state||5==e.current_state}))})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.orders,n=t.loading;return r.a.createElement("div",{className:"bg-light wd-wrapper"},r.a.createElement(L,{active:"Completed"}),r.a.createElement("div",{className:"wrapper-wx"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 approved_orders_us"},r.a.createElement("h6",{className:"text-dark bold-normal py-3 bg-white shadow-sm px-3 mt-3 rounded"},"Completed Orders ",a.length>0&&r.a.createElement("span",{className:"mx-1 badge badge-primary"},("0"+a.length).slice(-2)))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("div",{className:"table-responsive px-2"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Delivery Date")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"No.Items")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Total")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Current State")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Actions")))),r.a.createElement("tbody",null,a&&a.sort((function(e,t){return parseInt(e.current_state)-parseInt(t.current_state)})).map((function(t,a){return e.display(t,a)})),n&&r.a.createElement("td",{colSpan:5},r.a.createElement("h6",{className:"text-dark normal text-center py-2"},"Loading...")))))))))))}}]),a}(n.Component),_e=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).formValueChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.change_toggle=function(){e.state.addSuplierState?e.setState({addSuplierState:!1}):e.setState({addSuplierState:!0})},e.state={},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"bg-light wd-wrapper"},r.a.createElement(L,{active:"orders"}),r.a.createElement("div",{className:"wrapper-wx"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h5",{className:"text-dark bold-normal py-2 bg-white shadow-sm px-2 mt-3 rounded"},"Rejected  Orders")),r.a.createElement("div",{className:"col-12 pre_orders_us"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-3 bg-white pb-2"},r.a.createElement("form",{className:" py-2  px-3 ",onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label py-2"},"Supplier Name"),r.a.createElement("input",{type:"text",name:"name",className:"form-control"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h6",{className:"form-label py-2"},"Site Manager Name"),r.a.createElement("input",{type:"email",name:"email",className:"form-control"})),r.a.createElement("div",{className:"col-md-4 mt-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("button",{type:"reset",className:" btn btn-secondary   bold-normal",style:{width:"100%"}},"Reset")),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("button",{type:"submit",className:" btn btn-dark   bold-normal",style:{width:"100%"}},"Search")))))))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-3 bg-white pb-2"},r.a.createElement("h5",{className:"text-dark bold-normal py-2 bg-white px-2"},"All Orders"),r.a.createElement("div",{className:"table-responsive px-2"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Date"),r.a.createElement("th",{scope:"col"},"No.Items"),r.a.createElement("th",{scope:"col"},"Site Location"),r.a.createElement("th",{scope:"col"},"Actions"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,R()(new Date("2020-10-06")).format("YYYY MMM DD")),r.a.createElement("td",null,"05"),r.a.createElement("td",null,"Galle - Main Street(GL05)"),r.a.createElement("td",null,r.a.createElement(u.b,{to:"/admin/orders/1"},r.a.createElement("button",{className:"btn btn-success btn-sm px-2 mr-2"},r.a.createElement(C.a,{icon:D.e}))))))))))))))}}]),a}(n.Component),xe=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).display=function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},R()(e.date).format("LL"))),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},("0"+e.items.length).slice(-2))),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},"LKR ".concat(S.numberWithCommas(K(e.items)),".00"))),r.a.createElement("td",null,r.a.createElement("span",{className:"mr small rounded py-1 px-2 ".concat(z(e.current_state))},B(e.current_state))),r.a.createElement("td",null,r.a.createElement(u.b,{to:"/admin/orders/".concat(e._id)},r.a.createElement("span",{className:" rounded py-1 px-2 bg-success text-white"},r.a.createElement(C.a,{icon:D.e,className:"mr-1"})," Details"))))},e.state={orders:[],loading:!0},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;H.get_all_orders().then((function(t){console.log(t.data.data),e.setState({loading:!1,orders:t.data.data.filter((function(e){return 0!=e.current_state&&5!=e.current_state}))})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.orders,n=t.loading;return r.a.createElement("div",{className:"bg-light wd-wrapper"},r.a.createElement(L,{active:"Pending"}),r.a.createElement("div",{className:"wrapper-wx"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h6",{className:"text-dark bold-normal py-3 bg-white shadow-sm px-3 mt-3 rounded"},"Pending Orders ",a.length>0&&r.a.createElement("span",{className:"mx-1 badge badge-primary"},("0"+a.length).slice(-2)))),r.a.createElement("div",{className:"col-12 pending_orders_us"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("div",{className:"table-responsive px-2"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Delivery Date")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"No.Items")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Total")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Current State")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Actions")))),r.a.createElement("tbody",null,a&&a.sort((function(e,t){return parseInt(e.current_state)-parseInt(t.current_state)})).map((function(t,a){return e.display(t,a)})),n&&r.a.createElement("td",{colSpan:5},r.a.createElement("h6",{className:"text-dark normal text-center py-2"},"Loading...")))))))))))}}]),a}(n.Component),we=[{path:"/admin/dashboard",name:"Dashboard",component:Z,exact:!0},{path:"/admin/sitemanagers",name:"SiteManagerAdmin",component:te,exact:!0},{path:"/admin/createUser",name:"createUser",component:ce,exact:!0},{path:"/admin/suppliers",name:"SuppliersAdmin",component:se,exact:!0},{path:"/admin/orders",name:"OrderManagement",component:me,exact:!0},{path:"/admin/sites",name:"SitesManagment",component:pe,exact:!0},{path:"/admin/sites/:id",name:"SingleSite",component:oe,exact:!0},{path:"/admin/items",name:"ItemsManagement",component:fe,exact:!0},{path:"/admin/AddItem",name:"AddItem",component:Ne,exact:!0},{path:"/admin/pending",name:"PendingOrders",component:xe,exact:!0},{path:"/admin/completed",name:"ApprovedOrders",component:ve,exact:!0},{path:"/admin/rejected",name:"RejectedOrders",component:_e,exact:!0},{path:"/admin/orders/:id",name:"SingleOrder",component:de,exact:!0}],ye=[{path:"/admin/dashboard",name:"Dashboard",component:Z,exact:!0},{path:"/admin/sitemanagers",name:"SiteManagerAdmin",component:te,exact:!0},{path:"/admin/suppliers",name:"SuppliersAdmin",component:se,exact:!0},{path:"/admin/orders",name:"OrderManagement",component:me,exact:!0},{path:"/admin/sites",name:"SitesManagment",component:pe,exact:!0},{path:"/admin/sites/:id",name:"SingleSite",component:oe,exact:!0},{path:"/admin/items",name:"ItemsManagement",component:fe,exact:!0},{path:"/admin/AddItem",name:"AddItem",component:Ne,exact:!0},{path:"/admin/pending",name:"PendingOrders",component:xe,exact:!0},{path:"/admin/completed",name:"ApprovedOrders",component:ve,exact:!0},{path:"/admin/rejected",name:"RejectedOrders",component:_e,exact:!0},{path:"/admin/orders/:id",name:"SingleOrder",component:de,exact:!0}],Se=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).display=function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},R()(e.date).format("LL"))),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},("0"+e.items.length).slice(-2))),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},"LKR ".concat(S.numberWithCommas(K(e.items)),".00"))),r.a.createElement("td",null,r.a.createElement("span",{className:"mr small rounded py-1 px-2 ".concat(z(e.current_state))},B(e.current_state))),r.a.createElement("td",null,r.a.createElement(u.b,{to:"/admin/orders/".concat(e._id)},r.a.createElement("span",{className:" rounded py-1 px-2 bg-success text-white"},r.a.createElement(C.a,{icon:D.e,className:"mr-1"})," Details"))))},e.state={orders:[],loading:!0},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.auth.user.email,a=null;H.get_all_suppliers().then((function(e){var n=e.data.data.find((function(e){return e.email==t}));return n&&(a=n._id),H.get_all_orders()})).then((function(t){var n=t.data.data.filter((function(e){return 0==e.current_state||5==e.current_state}));null!=a?(n=n.filter((function(e){return e.supplier==a&&e.state.length>=4})),e.setState({loading:!1,orders:n})):e.setState({loading:!1})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.orders,n=t.loading;return r.a.createElement("div",{className:"bg-light wd-wrapper"},r.a.createElement(L,{active:"Completed"}),r.a.createElement("div",{className:"wrapper-wx"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h6",{className:"text-dark bold-normal py-3 bg-white shadow-sm px-3 mt-3 rounded"},"My Completed Orders ",a.length>0&&r.a.createElement("span",{className:"mx-1 badge badge-primary"},("0"+a.length).slice(-2)))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("div",{className:"table-responsive px-2"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Delivery Date")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"No.Items")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Total")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Current State")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Actions")))),r.a.createElement("tbody",null,a&&a.sort((function(e,t){return parseInt(e.current_state)-parseInt(t.current_state)})).map((function(t,a){return e.display(t,a)})),n&&r.a.createElement("td",{colSpan:5},r.a.createElement("h6",{className:"text-dark normal text-center py-2"},"Loading...")),!n&&0==a.length&&r.a.createElement("td",{colSpan:5},r.a.createElement("h6",{className:"text-dark normal text-center py-2"},"No Completed Orders Available Currently ")))))))))))}}]),a}(n.Component),ke=Object(h.b)((function(e){return{auth:e.auth||{}}}))(Se),Oe=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).display=function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},R()(e.date).format("LL"))),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},("0"+e.items.length).slice(-2))),r.a.createElement("td",null,r.a.createElement("h6",{className:"text-dark normal"},"LKR ".concat(S.numberWithCommas(K(e.items)),".00"))),r.a.createElement("td",null,r.a.createElement("span",{className:"mr small rounded py-1 px-2 ".concat(z(e.current_state))},B(e.current_state))),r.a.createElement("td",null,r.a.createElement(u.b,{to:"/admin/orders/".concat(e._id)},r.a.createElement("span",{className:" rounded py-1 px-2 bg-success text-white"},r.a.createElement(C.a,{icon:D.e,className:"mr-1"})," Details"))))},e.state={orders:[],loading:!0},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.auth.user.email,a=null;H.get_all_suppliers().then((function(e){var n=e.data.data.find((function(e){return e.email==t}));return n&&(a=n._id),H.get_all_orders()})).then((function(t){var n=t.data.data.filter((function(e){return 0!=e.current_state&&5!=e.current_state}));null!=a?(n=n.filter((function(e){return e.supplier==a&&e.current_state>=3})),e.setState({loading:!1,orders:n})):e.setState({loading:!1})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.orders,n=t.loading;return r.a.createElement("div",{className:"bg-light wd-wrapper"},r.a.createElement(L,{active:"Pending"}),r.a.createElement("div",{className:"wrapper-wx"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h6",{className:"text-dark bold-normal py-3 bg-white shadow-sm px-3 mt-3 rounded"},"My Pending Orders ",a.length>0&&r.a.createElement("span",{className:"mx-1 badge badge-primary"},("0"+a.length).slice(-2)))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-0 shadow-sm rounded mt-2 bg-white pb-2"},r.a.createElement("div",{className:"table-responsive px-2"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Delivery Date")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"No.Items")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Total")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Current State")),r.a.createElement("th",{scope:"col"},r.a.createElement("h6",{className:"header"},"Actions")))),r.a.createElement("tbody",null,a&&a.sort((function(e,t){return parseInt(e.current_state)-parseInt(t.current_state)})).map((function(t,a){return e.display(t,a)})),n&&r.a.createElement("td",{colSpan:5},r.a.createElement("h6",{className:"text-dark normal text-center py-2"},"Loading...")),!n&&0==a.length&&r.a.createElement("td",{colSpan:5},r.a.createElement("h6",{className:"text-dark normal text-center py-2"},"No Pending Orders Available Currently ")))))))))))}}]),a}(n.Component),je=[{path:"/admin/dashboard",name:"Dashboard",component:Z,exact:!0},{path:"/admin/pending",name:"PendingOrders",component:Object(h.b)((function(e){return{auth:e.auth||{}}}))(Oe),exact:!0},{path:"/admin/completed",name:"ApprovedOrders",component:ke,exact:!0},{path:"/admin/rejected",name:"RejectedOrders",component:_e,exact:!0},{path:"/admin/orders/:id",name:"SingleOrder",component:de,exact:!0}],Ce=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).router=function(){var t=j,a=e.props.auth.isAuthenticated,n=a?e.props.auth.user.role:"";return 1==a&&(t=Object(d.a)(t)),1==a&&3==n&&(t=[].concat(Object(d.a)(we),Object(d.a)(t))),1==a&&2==n&&(t=[].concat(Object(d.a)(ye),Object(d.a)(t))),1==a&&0==n&&(t=[].concat(Object(d.a)(je),Object(d.a)(t))),t},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(u.a,null,r.a.createElement(p.c,null,this.router().map((function(e,t){return r.a.createElement(p.a,{path:e.path,key:t,component:function(t){return r.a.createElement(e.component,t)},exact:!!e.exact})}))))}}]),a}(r.a.Component),De=Object(h.b)((function(e){return{auth:e.auth||{}}}))(Ce),Ae=a(110),Me=a(23),Le=a(111),Ie=a(50),Pe=a(112),Re=a.n(Pe),Ue=a(75),Te=a.n(Ue),Ve={isAuthenticated:!1,user:{}},qe={key:"root",storage:Re.a,whitelist:["cart","auth","wishlist"]},Ye=Object(Me.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return console.log(!Te()(t.user)),console.log(t.user),{isAuthenticated:!Te()(t.user),user:t.user};default:return e}}}),We=Object(Ie.a)(qe,(function(e,t){return Ye("USER_LOGOUT"===t.type?void 0:e,t)})),Ge=[Le.a],Fe=Object(Me.e)(We,{},Object(Me.d)(Me.a.apply(void 0,Ge),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e})),He=Object(Ie.b)(Fe);a(244),a(245),a(246);x.a.configure();var Ke=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,{store:Fe},r.a.createElement(Ae.a,{persistor:He},r.a.createElement(De,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[114,1,2]]]);
//# sourceMappingURL=main.7fa5e775.chunk.js.map